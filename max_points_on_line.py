#!/usr/bin/env python
# encoding: utf-8

"""
Given n points on a 2D plane, find the maximum number of points that lie on the same straight line.
"""

class Point(object):
    def __init__(self, a, b):
        self.x = a
        self.y = b

def genPoints(items):
    return [Point(*i) for i in items]

def maxPoints(points):
    n = len(points)
    m = 0
    if n < 3:
        return n
    for i in range(n):
        p1 = points[i]
        d = {}
        dup = 1
        for j in range(n):
            if i == j:
                continue
            p2 = points[j]
            if p1.x != p2.x:
                a = 1.0*(p2.y-p1.y)/(p2.x-p1.x)
                d[a] = d.get(a, 0) + 1
            elif p1.x == p2.x and p1.y == p2.y:
                dup += 1
            else:
                d['y'] = d.get('y', 0) + 1

        if len(d) > 0:
            m = max(m , max(d.values()) + dup)
        else:
            m = max(m, dup)

    return m


if __name__ == '__main__':
    #pts = [(0,0), (1,2), (3,4), (2,4)]
    #pts = [(29,87),(145,227),(400,84),(800,179),(60,950),(560,122),(-6,5),(-87,-53),(-64,-118),(-204,-388),(720,160),(-232,-228),(-72,-135),(-102,-163),(-68,-88),(-116,-95),(-34,-13),(170,437),(40,103),(0,-38),(-10,-7),(-36,-114),(238,587),(-340,-140),(-7,2),(36,586),(60,950),(-42,-597),(-4,-6),(0,18),(36,586),(18,0),(-720,-182),(240,46),(5,-6),(261,367),(-203,-193),(240,46),(400,84),(72,114),(0,62),(-42,-597),(-170,-76),(-174,-158),(68,212),(-480,-125),(5,-6),(0,-38),(174,262),(34,137),(-232,-187),(-232,-228),(232,332),(-64,-118),(-240,-68),(272,662),(-40,-67),(203,158),(-203,-164),(272,662),(56,137),(4,-1),(-18,-233),(240,46),(-3,2),(640,141),(-480,-125),(-29,17),(-64,-118),(800,179),(-56,-101),(36,586),(-64,-118),(-87,-53),(-29,17),(320,65),(7,5),(40,103),(136,362),(-320,-87),(-5,5),(-340,-688),(-232,-228),(9,1),(-27,-95),(7,-5),(58,122),(48,120),(8,35),(-272,-538),(34,137),(-800,-201),(-68,-88),(29,87),(160,27),(72,171),(261,367),(-56,-101),(-9,-2),(0,52),(-6,-7),(170,437),(-261,-210),(-48,-84),(-63,-171),(-24,-33),(-68,-88),(-204,-388),(40,103),(34,137),(-204,-388),(-400,-106)]
    pts = [(1, 1), (0, 0), (1, 1)]
    print maxPoints(genPoints(pts))











